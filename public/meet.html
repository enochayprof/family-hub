<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Meet</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-video"></i> Google Meet</h1>
        <p>Join the next scheduled family meeting.</p>

        <div id="auto-meeting" class="meet-options" style="display: none;">
            <p><strong>Upcoming Meeting:</strong> <span id="meeting-date"></span></p>
            <a id="meet-link" class="btn" href="#" target="_blank">
                <i class="fas fa-video"></i> Join Meeting
            </a>
        </div>

        <p id="no-meeting" style="display: none; color: red;">No meeting scheduled.</p>

        <a class="back-btn" href="dashboard.html"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
    </div>

    <script>
        async function fetchMeetLink() {
            try {
                let response = await fetch('/get-meet-link'); // Calls the backend
                let data = await response.json();

                if (data.meetLink) {
                    document.getElementById("meeting-date").textContent = data.date;
                    document.getElementById("meet-link").href = data.meetLink;
                    document.getElementById("auto-meeting").style.display = "block";
                } else {
                    document.getElementById("no-meeting").style.display = "block";
                }
            } catch (error) {
                console.error("Failed to fetch meeting link:", error);
                document.getElementById("no-meeting").style.display = "block";
            }
        }

        fetchMeetLink(); // Load meeting link on page load
    </script>
</body>
</html>
